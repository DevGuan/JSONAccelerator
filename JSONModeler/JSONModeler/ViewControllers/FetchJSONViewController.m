//
//  FetchJSONViewController.m
//  JSONModeler
//
//  Created by Jon Rexeisen on 11/10/11.
//  Copyright (c) 2011 Nerdery Interactive Labs. All rights reserved.
//

#import "FetchJSONViewController.h"

@implementation FetchJSONViewController
@synthesize modeler = _modeler;
@synthesize urlTextField = _urlTextField;
@synthesize urlTextFieldCell = _urlTextFieldCell;
@synthesize getDataButton = _getDataButton;
@synthesize JSONTextView = _JSONTextView;
@synthesize progressView = _progressView;
@synthesize chooseLanguageButton = _chooseLanguageButton;
@synthesize delegate = _delegate;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Initialization code here.
        
    }
    
    return self;
}

// -------------------------------------------------------------------------------
//	awakeFromNib:
// -------------------------------------------------------------------------------
- (void)awakeFromNib
{
	// load the default image from our bundle
    [self.urlTextFieldCell setPlaceholderString:NSLocalizedString(@"Enter URL...", nil)];
    [self.chooseLanguageButton setEnabled:NO];
    [self.urlTextFieldCell setStringValue:@"http://api.rottentomatoes.com/api/public/v1.0/lists/dvds/top_rentals.json?apikey=fm34txf3v6vu9jph5fdqt529"];
    [self.JSONTextView setString:@"{\"movies\":[{\"id\":\"770687943\",\"title\":\"Harry Potter and the Deathly Hallows - Part 2\",\"year\":2011,\"mpaa_rating\":\"PG-13\",\"runtime\":130,\"critics_consensus\":\"Thrilling, powerfully acted, and visually dazzling, Deathly Hallows Part II brings the Harry Potter franchise to a satisfying -- and suitably magical -- conclusion.\",\"release_dates\":{\"theater\":\"2011-07-15\",\"dvd\":\"2011-11-11\"},\"ratings\":{\"critics_rating\":\"Certified Fresh\",\"critics_score\":96,\"audience_rating\":\"Upright\",\"audience_score\":92},\"synopsis\":\"Harry Potter and the Deathly Hallows - Part 2, is the final adventure in the Harry Potter film series. The much-anticipated motion picture event is the second of two full-length parts. In the epic finale, the battle between the good and evil forces of the wizarding world escalates into an all-out war. The stakes have never been higher and no one is safe. But it is Harry Potter who may be called upon to make the ultimate sacrifice as he draws closer to the climactic showdown with Lord Voldemort. It all ends here. -- (C) Warner Bros\",\"posters\":{\"thumbnail\":\"http://content7.flixster.com/movie/11/16/12/11161221_mob.jpg\",\"profile\":\"http://content7.flixster.com/movie/11/16/12/11161221_pro.jpg\",\"detailed\":\"http://content7.flixster.com/movie/11/16/12/11161221_det.jpg\",\"original\":\"http://content7.flixster.com/movie/11/16/12/11161221_ori.jpg\"},\"abridged_cast\":[{\"name\":\"Daniel Radcliffe\",\"characters\":[\"Harry Potter\"]},{\"name\":\"Rupert Grint\",\"characters\":[\"Ron Weasley\",\"Ron Wesley\"]},{\"name\":\"Emma Watson\",\"characters\":[\"Hermione Granger\"]},{\"name\":\"Helena Bonham Carter\",\"characters\":[\"Bellatrix Lestrange\"]},{\"name\":\"Ralph Fiennes\",\"characters\":[\"Lord Voldemort\"]}],\"alternate_ids\":{\"imdb\":\"1201607\"},\"links\":{\"self\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/770687943.json\",\"alternate\":\"http://www.rottentomatoes.com/m/harry_potter_and_the_deathly_hallows_part_2/\",\"cast\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/770687943/cast.json\",\"clips\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/770687943/clips.json\",\"reviews\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/770687943/reviews.json\",\"similar\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/770687943/similar.json\"}},{\"id\":\"770855546\",\"title\":\"Pirates of the Caribbean: On Stranger Tides\",\"year\":2011,\"mpaa_rating\":\"PG-13\",\"runtime\":137,\"critics_consensus\":\"It's shorter and leaner than the previous sequel, but this Pirates runs aground on a disjointed plot and a non-stop barrage of noisy action sequences.\",\"release_dates\":{\"theater\":\"2011-05-20\",\"dvd\":\"2011-10-18\"},\"ratings\":{\"critics_rating\":\"Rotten\",\"critics_score\":33,\"audience_rating\":\"Upright\",\"audience_score\":61},\"synopsis\":\"Johnny Depp returns to his iconic role of Captain Jack Sparrow in an action-packed adventure. Crossing paths with the enigmatic Angelica (Penelope Cruz), he's not sure if it's love-or if she's a ruthless con artist who's using him to find the fabled Fountain of Youth. When she forces him aboard the \"Queen Anne's Revenge,\" the ship of the legendary pirate Blackbeard (Ian McShane), Jack finds himself on an unexpected adventure in which he doesn't know whom to fear more: Blackbeard or Angelica, with whom he shares a mysterious past. -- (C) Disney\",\"posters\":{\"thumbnail\":\"http://content6.flixster.com/movie/11/15/67/11156760_mob.jpg\",\"profile\":\"http://content6.flixster.com/movie/11/15/67/11156760_pro.jpg\",\"detailed\":\"http://content6.flixster.com/movie/11/15/67/11156760_det.jpg\",\"original\":\"http://content6.flixster.com/movie/11/15/67/11156760_ori.jpg\"},\"abridged_cast\":[{\"name\":\"Johnny Depp\",\"characters\":[\"Captain Jack Sparrow\"]},{\"name\":\"Penelope Cruz\",\"characters\":[\"Angelica\"]},{\"name\":\"Geoffrey Rush\",\"characters\":[\"Captain Hector Barbossa\"]},{\"name\":\"Ian McShane\",\"characters\":[\"Blackbeard\"]},{\"name\":\"Kevin McNally\",\"characters\":[\"Joshamee Gibbs\"]}],\"alternate_ids\":{\"imdb\":\"1298650\"},\"links\":{\"self\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/770855546.json\",\"alternate\":\"http://www.rottentomatoes.com/m/pirates_of_the_caribbean_on_stranger_tides/\",\"cast\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/770855546/cast.json\",\"clips\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/770855546/clips.json\",\"reviews\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/770855546/reviews.json\",\"similar\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/770855546/similar.json\"}},{\"id\":\"770739679\",\"title\":\"Captain America: The First Avenger\",\"year\":2011,\"mpaa_rating\":\"PG-13\",\"runtime\":121,\"critics_consensus\":\"With plenty of pulpy action, a pleasantly retro vibe, and a handful of fine performances, Captain America is solidly old-fashioned blockbuster entertainment.\",\"release_dates\":{\"theater\":\"2011-07-22\",\"dvd\":\"2011-10-25\"},\"ratings\":{\"critics_rating\":\"Certified Fresh\",\"critics_score\":78,\"audience_rating\":\"Upright\",\"audience_score\":75},\"synopsis\":\"Captain America: The First Avenger will focus on the early days of the Marvel Universe when Steve Rogers (Chris Evans) volunteers to participate in an experimental program that turns him into the Super Soldier known as Captain America. As Captain America, Rogers joins forces with Bucky Barnes (Sebastian Stan) and Peggy Carter (Hayley Atwell) to wage war on the evil HYDRA organization, led by the villainous Red Skull (Hugo Weaving.) -- (C) Paramount\",\"posters\":{\"thumbnail\":\"http://content9.flixster.com/movie/11/15/83/11158339_mob.jpg\",\"profile\":\"http://content9.flixster.com/movie/11/15/83/11158339_pro.jpg\",\"detailed\":\"http://content9.flixster.com/movie/11/15/83/11158339_det.jpg\",\"original\":\"http://content9.flixster.com/movie/11/15/83/11158339_ori.jpg\"},\"abridged_cast\":[{\"name\":\"Chris Evans\",\"characters\":[\"Captain America/Steve Rogers\",\"Steve Rogers / Captain America\",\"Steve Rogers/Captain America\"]},{\"name\":\"Hayley Atwell\",\"characters\":[\"Peggy Carter\"]},{\"name\":\"Sebastian Stan\",\"characters\":[\"Bucky Barnes\",\"James Buchanan \"Bucky\" Barnes\"]},{\"name\":\"Tommy Lee Jones\",\"characters\":[\"Colonel Chester Phillips\"]},{\"name\":\"Hugo Weaving\",\"characters\":[\"Johann Schmidt/Red Skull\",\"Johann Schmidt/The Red Skull\",\"Red Skull\"]}],\"alternate_ids\":{\"imdb\":\"0458339\"},\"links\":{\"self\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/770739679.json\",\"alternate\":\"http://www.rottentomatoes.com/m/captain-america/\",\"cast\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/770739679/cast.json\",\"clips\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/770739679/clips.json\",\"reviews\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/770739679/reviews.json\",\"similar\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/770739679/similar.json\"}},{\"id\":\"771223136\",\"title\":\"Transformers: Dark of the Moon\",\"year\":2011,\"mpaa_rating\":\"PG-13\",\"runtime\":150,\"critics_consensus\":\"Its special effects -- and 3D shots -- are undeniably impressive, but they aren't enough to fill up its loud, bloated running time, or mask its thin, indifferent script.\",\"release_dates\":{\"theater\":\"2011-06-29\",\"dvd\":\"2011-09-30\"},\"ratings\":{\"critics_rating\":\"Rotten\",\"critics_score\":35,\"audience_rating\":\"Upright\",\"audience_score\":67},\"synopsis\":\"Shia LaBeouf returns as Sam Witwicky in Transformers: Dark of the Moon. When a mysterious event from Earth's past erupts into the present day it threatens to bring a war to Earth so big that the Transformers alone will not be able to save us. -- (C) Paramount\",\"posters\":{\"thumbnail\":\"http://content6.flixster.com/movie/11/15/84/11158420_mob.jpg\",\"profile\":\"http://content6.flixster.com/movie/11/15/84/11158420_pro.jpg\",\"detailed\":\"http://content6.flixster.com/movie/11/15/84/11158420_det.jpg\",\"original\":\"http://content6.flixster.com/movie/11/15/84/11158420_ori.jpg\"},\"abridged_cast\":[{\"name\":\"Shia LaBeouf\",\"characters\":[\"Sam Witwicky\"]},{\"name\":\"Josh Duhamel\",\"characters\":[\"Lt. Colonel William Lennox\"]},{\"name\":\"John Turturro\",\"characters\":[\"Simmons\"]},{\"name\":\"Tyrese Gibson\",\"characters\":[\"Sergeant Epps\"]},{\"name\":\"Patrick Dempsey\",\"characters\":[\"Dylan\"]}],\"alternate_ids\":{\"imdb\":\"1399103\"},\"links\":{\"self\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/771223136.json\",\"alternate\":\"http://www.rottentomatoes.com/m/transformers_dark_of_the_moon/\",\"cast\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/771223136/cast.json\",\"clips\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/771223136/clips.json\",\"reviews\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/771223136/reviews.json\",\"similar\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/771223136/similar.json\"}},{\"id\":\"770783549\",\"title\":\"Thor\",\"year\":2011,\"mpaa_rating\":\"PG-13\",\"runtime\":115,\"critics_consensus\":\"A dazzling blockbuster that tempers its sweeping scope with wit, humor, and human drama, Thor is mighty Marvel entertainment.\",\"release_dates\":{\"theater\":\"2011-05-06\",\"dvd\":\"2011-09-13\"},\"ratings\":{\"critics_rating\":\"Certified Fresh\",\"critics_score\":77,\"audience_rating\":\"Upright\",\"audience_score\":80},\"synopsis\":\"The epic adventure Thor spans the Marvel Universe from present day Earth to the mystical realm of Asgard. At the center of the story is The Mighty Thor, a powerful but arrogant warrior whose reckless actions reignite an ancient war. As a result, Thor is banished to Earth where he is forced to live among humans. When the most dangerous villain of his world sends its darkest forces to invade Earth, Thor learns what it takes to be a true hero.-- (C) Paramount Pictures\",\"posters\":{\"thumbnail\":\"http://content8.flixster.com/movie/11/15/45/11154550_mob.jpg\",\"profile\":\"http://content8.flixster.com/movie/11/15/45/11154550_pro.jpg\",\"detailed\":\"http://content8.flixster.com/movie/11/15/45/11154550_det.jpg\",\"original\":\"http://content8.flixster.com/movie/11/15/45/11154550_ori.jpg\"},\"abridged_cast\":[{\"name\":\"Chris Hemsworth\",\"characters\":[\"Thor\"]},{\"name\":\"Natalie Portman\",\"characters\":[\"Jane Foster\"]},{\"name\":\"Tom Hiddleston\",\"characters\":[\"Loki\"]},{\"name\":\"Anthony Hopkins\",\"characters\":[\"Odin\"]},{\"name\":\"Stellan Skarsgard\",\"characters\":[\"Dr. Erik Selvig\"]}],\"alternate_ids\":{\"imdb\":\"0800369\"},\"links\":{\"self\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/770783549.json\",\"alternate\":\"http://www.rottentomatoes.com/m/thor/\",\"cast\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/770783549/cast.json\",\"clips\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/770783549/clips.json\",\"reviews\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/770783549/reviews.json\",\"similar\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/770783549/similar.json\"}},{\"id\":\"770677993\",\"title\":\"Green Lantern\",\"year\":2011,\"mpaa_rating\":\"PG-13\",\"runtime\":105,\"critics_consensus\":\"Noisy, overproduced, and thinly written, Green Lantern squanders an impressive budget and decades of comics mythology.\",\"release_dates\":{\"theater\":\"2011-06-17\",\"dvd\":\"2011-10-14\"},\"ratings\":{\"critics_rating\":\"Rotten\",\"critics_score\":27,\"audience_rating\":\"Spilled\",\"audience_score\":48},\"synopsis\":\"In a universe as vast as it is mysterious, a small but powerful force has existed for centuries. Protectors of peace and justice, they are called the Green Lantern Corps. A brotherhood of warriors sworn to keep intergalactic order, each Green Lantern wears a ring that grants him superpowers. But when a new enemy called Parallax threatens to destroy the balance of power in the Universe, their fate and the fate of Earth lie in the hands of their newest recruit, the first human ever selected: Hal Jordan (Ryan Reynolds). Hal is a gifted and cocky test pilot, but the Green Lanterns have little respect for humans, who have never harnessed the infinite powers of the ring before. -- (C) Warner Bros\",\"posters\":{\"thumbnail\":\"http://content6.flixster.com/movie/11/16/09/11160940_mob.png\",\"profile\":\"http://content6.flixster.com/movie/11/16/09/11160940_pro.png\",\"detailed\":\"http://content6.flixster.com/movie/11/16/09/11160940_det.png\",\"original\":\"http://content6.flixster.com/movie/11/16/09/11160940_ori.png\"},\"abridged_cast\":[{\"name\":\"Ryan Reynolds\",\"characters\":[\"Green Lantern\",\"Hal Jordan/Green Lantern\"]},{\"name\":\"Blake Lively\",\"characters\":[\"Carol Ferris\"]},{\"name\":\"Peter Sarsgaard\",\"characters\":[\"Dr. Hector Hammond\",\"Hector Hammond\"]},{\"name\":\"Mark Strong\",\"characters\":[\"Sinestro\"]},{\"name\":\"Tim Robbins\",\"characters\":[\"Senator Hammond\"]}],\"alternate_ids\":{\"imdb\":\"1133985\"},\"links\":{\"self\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/770677993.json\",\"alternate\":\"http://www.rottentomatoes.com/m/green_lantern/\",\"cast\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/770677993/cast.json\",\"clips\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/770677993/clips.json\",\"reviews\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/770677993/reviews.json\",\"similar\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/770677993/similar.json\"}},{\"id\":\"770873459\",\"title\":\"Fast Five\",\"year\":2011,\"mpaa_rating\":\"PG-13\",\"runtime\":132,\"critics_consensus\":\"Sleek, loud, and over the top, Fast Five proudly embraces its brainless action thrills.\",\"release_dates\":{\"theater\":\"2011-04-29\",\"dvd\":\"2011-10-04\"},\"ratings\":{\"critics_rating\":\"Certified Fresh\",\"critics_score\":78,\"audience_rating\":\"Upright\",\"audience_score\":83},\"synopsis\":\"Former cop Brian O'Conner (Paul Walker) partners with ex-con Dom Toretto (Vin Diesel) on the opposite side of the law. Dwayne Johnson joins returning favorites Jordana Brewster, Tyrese Gibson, Chris \"Ludacris\" Bridges, Matt Schulze, Sung Kang, Gal Gadot, Tego Calderon and Don Omar for this ultimate high-stakes race. Since Brian and Mia Toretto (Brewster) broke Dom out of custody, they've blown across many borders to elude authorities. Now backed into a corner in Rio de Janeiro, they must pull one last job in order to gain their freedom. As they assemble their elite team of top racers, the unlikely allies know their only shot of getting out for good means confronting the corrupt businessman who wants them dead. But he's not the only one on their tail. Hard-nosed federal agent Luke Hobbs (Dwayne Johnson) never misses his target. -- (C) Universal\",\"posters\":{\"thumbnail\":\"http://content9.flixster.com/movie/11/15/70/11157071_mob.jpg\",\"profile\":\"http://content9.flixster.com/movie/11/15/70/11157071_pro.jpg\",\"detailed\":\"http://content9.flixster.com/movie/11/15/70/11157071_det.jpg\",\"original\":\"http://content9.flixster.com/movie/11/15/70/11157071_ori.jpg\"},\"abridged_cast\":[{\"name\":\"Vin Diesel\",\"characters\":[\"Dominic Toretto\"]},{\"name\":\"Paul Walker\",\"characters\":[\"Brian O'Conner\"]},{\"name\":\"Dwayne \"The Rock\" Johnson\",\"characters\":[\"Hobbs\"]},{\"name\":\"Jordana Brewster\",\"characters\":[\"Mia Toretto\"]},{\"name\":\"Tyrese Gibson\",\"characters\":[\"Roman Pearce\"]}],\"alternate_ids\":{\"imdb\":\"1596343\"},\"links\":{\"self\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/770873459.json\",\"alternate\":\"http://www.rottentomatoes.com/m/fast_five/\",\"cast\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/770873459/cast.json\",\"clips\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/770873459/clips.json\",\"reviews\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/770873459/reviews.json\",\"similar\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/770873459/similar.json\"}},{\"id\":\"770805427\",\"title\":\"Cars 2\",\"year\":2011,\"mpaa_rating\":\"G\",\"runtime\":112,\"critics_consensus\":\"Cars 2 is as visually appealing as any other Pixar production, but all that dazzle can't disguise the rusty storytelling under the hood.\",\"release_dates\":{\"theater\":\"2011-06-24\",\"dvd\":\"2011-11-01\"},\"ratings\":{\"critics_rating\":\"Rotten\",\"critics_score\":38,\"audience_rating\":\"Spilled\",\"audience_score\":57},\"synopsis\":\"Star racecar Lightning McQueen (Owen Wilson) and the incomparable tow truck Mater (Larry the Cable Guy) take their friendship to exciting new places in Cars 2 when they head overseas to compete in the first-ever World Grand Prix to determine the world's fastest car. But the road to the championship is filled with plenty of potholes, detours and hilarious surprises when Mater gets caught up in an intriguing adventure of his own: international espionage. Mater finds himself torn between assisting Lightning McQueen in the high-profile race and towing the line in a top-secret mission orchestrated by master British super spy Finn McMissile (Michael Caine) and the stunning spy-in-training Holley Shiftwell (Emily Mortimer). -- (C) Disney\",\"posters\":{\"thumbnail\":\"http://content9.flixster.com/movie/11/15/64/11156447_mob.jpg\",\"profile\":\"http://content9.flixster.com/movie/11/15/64/11156447_pro.jpg\",\"detailed\":\"http://content9.flixster.com/movie/11/15/64/11156447_det.jpg\",\"original\":\"http://content9.flixster.com/movie/11/15/64/11156447_ori.jpg\"},\"abridged_cast\":[{\"name\":\"Owen Wilson\",\"characters\":[\"Lightning McQueen\"]},{\"name\":\"Larry The Cable Guy\",\"characters\":[\"Mater\"]},{\"name\":\"John Turturro\",\"characters\":[\"Francesco Bernoulli\"]},{\"name\":\"Eddie Izzard\",\"characters\":[\"Miles Axlerod\"]},{\"name\":\"Michael Caine\",\"characters\":[\"Finn McMissile\",\"Finn McMissle\"]}],\"alternate_ids\":{\"imdb\":\"1216475\"},\"links\":{\"self\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/770805427.json\",\"alternate\":\"http://www.rottentomatoes.com/m/cars_2/\",\"cast\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/770805427/cast.json\",\"clips\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/770805427/clips.json\",\"reviews\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/770805427/reviews.json\",\"similar\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/770805427/similar.json\"}},{\"id\":\"771030879\",\"title\":\"Bad Teacher\",\"year\":2011,\"mpaa_rating\":\"R\",\"runtime\":91,\"critics_consensus\":\"In spite of a promising concept and a charmingly brazen performance from Cameron Diaz, Bad Teacher is never as funny as it should be.\",\"release_dates\":{\"theater\":\"2011-06-24\",\"dvd\":\"2011-10-18\"},\"ratings\":{\"critics_rating\":\"Rotten\",\"critics_score\":44,\"audience_rating\":\"Spilled\",\"audience_score\":38},\"synopsis\":\"Some teachers just don't give an F. For example, there's Elizabeth (Cameron Diaz). She's foul-mouthed, ruthless, and inappropriate. She drinks, she gets high, and she can't wait to marry her meal ticket and get out of her bogus day job. When she's dumped by her fiance, she sets her plan in motion to win over a rich, handsome substitute (Justin Timberlake) - competing for his affections with an overly energetic colleague, Amy (Lucy Punch). When Elizabeth also finds herself fighting off the advances of a sarcastic, irreverent gym teacher (Jason Segel), the consequences of her wild and outrageous schemes give her students, her coworkers, and even herself an education like no other. -- (C) Sony Pictures\",\"posters\":{\"thumbnail\":\"http://content8.flixster.com/movie/11/15/61/11156194_mob.jpg\",\"profile\":\"http://content8.flixster.com/movie/11/15/61/11156194_pro.jpg\",\"detailed\":\"http://content8.flixster.com/movie/11/15/61/11156194_det.jpg\",\"original\":\"http://content8.flixster.com/movie/11/15/61/11156194_ori.jpg\"},\"abridged_cast\":[{\"name\":\"Cameron Diaz\",\"characters\":[\"Elizabeth\",\"Elizabeth Halsey\"]},{\"name\":\"Justin Timberlake\",\"characters\":[\"Scott Delacorte\"]},{\"name\":\"Jason Segel\",\"characters\":[\"Russell Gettis\"]},{\"name\":\"John Michael Higgins\",\"characters\":[\"Principal Wally Snur\"]},{\"name\":\"Molly Shannon\",\"characters\":[\"Melody (Garretts' Mom)\"]}],\"alternate_ids\":{\"imdb\":\"1284575\"},\"links\":{\"self\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/771030879.json\",\"alternate\":\"http://www.rottentomatoes.com/m/bad_teacher/\",\"cast\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/771030879/cast.json\",\"clips\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/771030879/clips.json\",\"reviews\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/771030879/reviews.json\",\"similar\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/771030879/similar.json\"}},{\"id\":\"771041149\",\"title\":\"Horrible Bosses\",\"year\":2011,\"mpaa_rating\":\"R\",\"runtime\":97,\"critics_consensus\":\"It's nasty, uneven, and far from original, but thanks to a smartly assembled cast that makes the most of a solid premise, Horrible Bosses works.\",\"release_dates\":{\"theater\":\"2011-07-08\",\"dvd\":\"2011-10-11\"},\"ratings\":{\"critics_rating\":\"Certified Fresh\",\"critics_score\":69,\"audience_rating\":\"Upright\",\"audience_score\":73},\"synopsis\":\"For Nick (Jason Bateman), Kurt (Jason Sudeikis) and Dale (Charlie Day), the only thing that would make the daily grind more tolerable would be to grind their intolerable bosses (Kevin Spacey, Colin Farrell, Jennifer Aniston) into dust. Quitting is not an option, so, with the benefit of a few-too-many drinks and some dubious advice from a hustling ex-con (Jamie Foxx), the three friends devise a convoluted and seemingly foolproof plan to rid themselves of their respective employers... permanently. There's only one problem: even the best laid plans are only as foolproof as the brains behind them. -- (C) Warner Bros\",\"posters\":{\"thumbnail\":\"http://content7.flixster.com/movie/11/16/09/11160977_mob.jpg\",\"profile\":\"http://content7.flixster.com/movie/11/16/09/11160977_pro.jpg\",\"detailed\":\"http://content7.flixster.com/movie/11/16/09/11160977_det.jpg\",\"original\":\"http://content7.flixster.com/movie/11/16/09/11160977_ori.jpg\"},\"abridged_cast\":[{\"name\":\"Jason Bateman\",\"characters\":[\"Nick\",\"Nick Hendricks\"]},{\"name\":\"Jason Sudeikis\",\"characters\":[\"Kurt\",\"Kurt Buckman\"]},{\"name\":\"Jennifer Aniston\",\"characters\":[\"Dr. Julia Harris\"]},{\"name\":\"Kevin Spacey\",\"characters\":[\"Dave Harken\"]},{\"name\":\"Charlie Day\",\"characters\":[\"Dale\",\"Dale Arbus\"]}],\"alternate_ids\":{\"imdb\":\"1499658\"},\"links\":{\"self\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/771041149.json\",\"alternate\":\"http://www.rottentomatoes.com/m/horrible_bosses/\",\"cast\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/771041149/cast.json\",\"clips\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/771041149/clips.json\",\"reviews\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/771041149/reviews.json\",\"similar\":\"http://api.rottentomatoes.com/api/public/v1.0/movies/771041149/similar.json\"}}],\"links\":{\"self\":\"http://api.rottentomatoes.com/api/public/v1.0/lists/dvds/top_rentals.json?limit=10&country=us\",\"alternate\":\"http://www.rottentomatoes.com/dvd/top_rentals.php\"},\"link_template\":\"http://api.rottentomatoes.com/api/public/v1.0/lists/dvds/top_rentals.json?limit={num-results}&country={country-code}\"}"];
}



- (IBAction)getUrlPressed:(id)sender 
{
    [self.modeler addObserver:self forKeyPath:@"parseComplete" options:NSKeyValueObservingOptionNew context:NULL];
    [_modeler loadJSONWithURL:[_urlTextField stringValue]];
}

- (IBAction)chooseLanguagePressed:(id)sender 
{
    if([self.delegate conformsToProtocol:@protocol(MasterControllerDelegate)]) {
        [self.delegate moveToNextViewController];
    }
}

-(void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    if(_modeler.parseComplete) {
        
        [self.chooseLanguageButton setEnabled:YES];
    }
}

@end
